<!DOCTYPE html>
<html><head><meta charset="utf-8"></head><body><div class="reveal"><link rel="stylesheet" href="reveal.js/css/reveal.css"><link id="theme" rel="stylesheet" href="mozilla-theme.css"><link rel="stylesheet" href="reveal.js/plugin/highlight/github.min.css"><div class="slides"><section><h1 class="slide-title intro">Module 4</h1></section><section><section><h2 class="slide-title chapter">Projects</h2></section><section><h3 class="slide-title slide">Creating a project</h3><p>Type the following in your terminal:</p><pre><code class="bash">lein new app global-growth</code></pre></section><section><h3 class="slide-title slide">Leiningen</h3><ul><li>manages Clojure projects</li><li>tool you run in your terminal</li><li>silly name</li></ul></section><section><h3 class="slide-title slide">Project structure</h3><ul><li>.gitignore</li><li>doc/intro.md</li><li><b>project.clj</b></li><li>resources/</li><li>README.md</li><li><b>src/global_growth/core.clj</b></li><li>test/global_growth/core_test.clj</li></ul></section><section><h3 class="slide-title slide">project.clj</h3><ul><li>configuration file for Leiningen</li><li>lists dependencies</li><li>contains information about program author, description and more</li></ul></section><section><h3 class="slide-title slide">src/global_growth/core.clj</h3><p>This is where we will be writing all our code.</p><p>Clojure programs can be made up of multiple files, but we are going to use just this one today.</p></section><section><h3 class="slide-title slide">Try it out</h3><p>Go to the command line and enter:</p><pre><code class="bash">cd global_growth
lein run</code></pre></section></section><section><section><h2 class="slide-title chapter">Modifying a project</h2></section><section><h3 class="slide-title slide">What happens when I run my program?</h3><p>Open <code>src/global_growth/core.clj</code>.</p><p>What is in the <code>-main</code> function?</p></section><section><h3 class="slide-title slide">The -main function</h3><ul><li>Just an ordinary function with an odd name</li><li>The function called first when you run your program</li><li>Can call other functions</li></ul></section><section><h3 class="slide-title slide">Using other functions from -main</h3><pre><code class="clojure">(defn quotify
  [quote author]
  (str quote "\n\n-- " author))

(defn -main
  [&amp; args]
  (println
   (quotify (str "A man who carries a cat by the tail learns "
                 "something he can learn in no other way.")
            "Mark Twain")))</code></pre></section><section><h3 class="slide-title slide">Namespaces and organization</h3><p>Namespaces let you organize your code into logical sections.</p><pre><code class="clojure">;; in src/global_growth/core.clj
(ns global-growth.core)</code></pre></section><section><h3 class="slide-title slide">Dependencies</h3><p>Dependencies are code libraries others have written you can reuse in your project.</p><p>Open <code>project.clj</code> and look for the <code>:dependencies</code> key.</p><pre><code class="clojure">:dependencies [[org.clojure/clojure "1.5.1"]
               [clj-http "0.9.0"]
               [cheshire "5.3.1"]]</code></pre></section><section><h3 class="slide-title slide">Requiring dependencies</h3><pre><code class="clojure">;; in src/global_growth/core.clj
(ns global-growth.core)
(require '[clj-http.client :as client])</code></pre></section><section><h3 class="slide-title slide">Exercise: Add the following core to core.clj</h3><pre><code class="clojure">(ns global-growth.core)
(require '[clj-http.client :as client])
(require '[cheshire.core :as json])

(def base-uri "http://api.worldbank.org")
(def default-query-params {:format "json" :per_page 10000})

(defn parse-json [str]
  (json/parse-string str true))

(defn get-api
  "Returns map representing API response."
  [path params]
  (let [base-path (str base-uri path)
        query-params (merge default-query-params params)
        response (parse-json (:body (client/get base-path {:query-params query-params})))
        metadata (first response)
        results (second response)]
    {:metadata metadata
     :results results}))</code></pre></section></section></div></div><script src="main.js" type="text/javascript"></script><script type="text/javascript">tailrecursion.hoplon.app_pages._module4_DOT_html.hoploninit();</script></body></html>